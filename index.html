<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Reading Timer</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header class="header glass-card">
            <h1 class="text-gradient">📰 News Reading Timer</h1>
            <p>Limit your daily news consumption with intelligent time management</p>
            <div class="status-indicator">
                <span id="connection-status" class="status-offline">🟢 Online Mode</span>
            </div>
        </header>

        <div class="timer-section glass-card">
            <div class="main-timer-display">
                <h3 class="text-gradient">Total Time Remaining</h3>
                <div class="time-display">
                    <span id="total-time-left" class="text-gradient">30:00</span>
                </div>
                <div class="progress-bar progress-enhanced">
                    <div class="progress-fill" id="total-progress"></div>
                </div>
            </div>

            <div class="controls">
                <button id="start-btn" class="btn btn-primary hover-lift">▶️ Start Timer</button>
                <button id="pause-btn" class="btn btn-secondary hover-lift" disabled>⏸️ Pause</button>
                <button id="reset-btn" class="btn btn-secondary hover-lift">🔄 Reset All</button>
                <button id="settings-btn" class="btn btn-secondary hover-lift">⚙️ Settings</button>
            </div>
        </div>


        <div class="stats-section glass-card">
            <h3 class="text-gradient">Today's Usage</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="time-used">0:00</div>
                    <div class="stat-label">Time Used</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="sessions-count">0</div>
                    <div class="stat-label">Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="time-remaining">15:00</div>
                    <div class="stat-label">Remaining</div>
                </div>
            </div>
        </div>

        <div class="progress-section glass-card">
            <h3 class="text-gradient">Source Progress</h3>
            <p class="progress-instruction">Click on a source to automatically start its timer:</p>
            <div class="sources-grid">
                <div class="source-card" data-source="bbc-football">
                    <div class="source-header">
                        <div class="source-icon">⚽</div>
                        <div class="source-info">
                            <h3>BBC Football</h3>
                            <p>Sports news and updates</p>
                        </div>
                        <a class="progress-url" href="https://www.bbc.com/sport/football" target="_blank"
                            rel="noopener noreferrer" title="https://www.bbc.com/sport/football">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="bbc-football-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="bbc-football-used">0:00</span> / <span id="bbc-football-total">5:00</span>
                    </div>
                </div>

                <div class="source-card" data-source="bbc-headlines">
                    <div class="source-header">
                        <div class="source-icon">📰</div>
                        <div class="source-info">
                            <h3>BBC Headlines</h3>
                            <p>Breaking news and current affairs</p>
                        </div>
                        <a class="progress-url" href="https://www.bbc.com/news" target="_blank"
                            rel="noopener noreferrer" title="https://www.bbc.com/news">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="bbc-headlines-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="bbc-headlines-used">0:00</span> / <span id="bbc-headlines-total">5:00</span>
                    </div>
                </div>

                <div class="source-card" data-source="rte-headlines">
                    <div class="source-header">
                        <div class="source-icon">🇮🇪</div>
                        <div class="source-info">
                            <h3>RTE Headlines</h3>
                            <p>Irish news and current events</p>
                        </div>
                        <a class="progress-url" href="https://www.rte.ie/news/" target="_blank"
                            rel="noopener noreferrer" title="https://www.rte.ie/news/">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="rte-headlines-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="rte-headlines-used">0:00</span> / <span id="rte-headlines-total">5:00</span>
                    </div>
                </div>

                <div class="source-card" data-source="guardian-headlines">
                    <div class="source-header">
                        <div class="source-icon">🛡️</div>
                        <div class="source-info">
                            <h3>Guardian Headlines</h3>
                            <p>Independent journalism and analysis</p>
                        </div>
                        <a class="progress-url" href="https://www.theguardian.com/uk" target="_blank"
                            rel="noopener noreferrer" title="https://www.theguardian.com/uk">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="guardian-headlines-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="guardian-headlines-used">0:00</span> / <span id="guardian-headlines-total">5:00</span>
                    </div>
                </div>

                <div class="source-card" data-source="guardian-opinion">
                    <div class="source-header">
                        <div class="source-icon">💭</div>
                        <div class="source-info">
                            <h3>Guardian Opinion</h3>
                            <p>Commentary and opinion pieces</p>
                        </div>
                        <a class="progress-url" href="https://www.theguardian.com/commentisfree" target="_blank"
                            rel="noopener noreferrer" title="https://www.theguardian.com/commentisfree">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="guardian-opinion-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="guardian-opinion-used">0:00</span> / <span id="guardian-opinion-total">5:00</span>
                    </div>
                </div>

                <div class="source-card" data-source="cnn">
                    <div class="source-header">
                        <div class="source-icon">🌍</div>
                        <div class="source-info">
                            <h3>CNN</h3>
                            <p>Global news and breaking stories</p>
                        </div>
                        <a class="progress-url" href="https://www.cnn.com/" target="_blank" rel="noopener noreferrer"
                            title="https://www.cnn.com/">🔗</a>
                    </div>
                    <div class="progress-bar progress-enhanced">
                        <div class="progress-fill" id="cnn-progress"></div>
                    </div>
                    <div class="progress-time">
                        <span id="cnn-used">0:00</span> / <span id="cnn-total">5:00</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="notification-section">
            <p id="notification" class="notification hidden"></p>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2 class="text-gradient">⚙️ Settings</h2>
                <button id="close-modal" class="close-btn hover-lift">&times;</button>
            </div>

            <div class="modal-body">
                <div class="settings-section">
                    <h3>Daily Settings</h3>
                    <div class="setting">
                        <label for="total-time-limit">Total daily time limit (minutes):</label>
                        <input type="number" id="total-time-limit" class="form-input" value="30" min="1" max="120">
                    </div>
                    <div class="setting">
                        <label for="auto-start">Auto-start timer:</label>
                        <input type="checkbox" id="auto-start">
                    </div>
                    <div class="setting">
                        <button id="distribute-time" class="btn btn-secondary">Distribute Time Evenly</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Individual Source Allocations</h3>
                    <div class="allocation-grid">
                        <div class="allocation-item">
                            <label for="bbc-football-alloc">⚽ BBC Football:</label>
                            <input type="number" id="bbc-football-alloc" value="5" min="0" max="30"
                                data-source="bbc-football">
                            <span>minutes</span>
                        </div>
                        <div class="allocation-item">
                            <label for="bbc-headlines-alloc">📰 BBC Headlines:</label>
                            <input type="number" id="bbc-headlines-alloc" value="5" min="0" max="30"
                                data-source="bbc-headlines">
                            <span>minutes</span>
                        </div>
                        <div class="allocation-item">
                            <label for="rte-headlines-alloc">🇮🇪 RTE Headlines:</label>
                            <input type="number" id="rte-headlines-alloc" value="5" min="0" max="30"
                                data-source="rte-headlines">
                            <span>minutes</span>
                        </div>
                        <div class="allocation-item">
                            <label for="guardian-headlines-alloc">🛡️ Guardian Headlines:</label>
                            <input type="number" id="guardian-headlines-alloc" value="5" min="0" max="30"
                                data-source="guardian-headlines">
                            <span>minutes</span>
                        </div>
                        <div class="allocation-item">
                            <label for="guardian-opinion-alloc">💭 Guardian Opinion:</label>
                            <input type="number" id="guardian-opinion-alloc" value="5" min="0" max="30"
                                data-source="guardian-opinion">
                            <span>minutes</span>
                        </div>
                        <div class="allocation-item">
                            <label for="cnn-alloc">🌍 CNN:</label>
                            <input type="number" id="cnn-alloc" value="5" min="0" max="30" data-source="cnn">
                            <span>minutes</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Advanced Options</h3>
                    <div class="setting">
                        <button id="add-source-btn" class="btn btn-secondary">Add New Source (Math Challenge)</button>
                        <p class="setting-description">Adding sources is discouraged. You must solve simultaneous
                            equations to proceed.</p>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Notifications</h3>
                    <div class="setting">
                        <button id="request-notifications" class="btn btn-secondary">Enable Notifications</button>
                        <p class="setting-description">Allow browser notifications for timer alerts.</p>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Data Management</h3>
                    <div class="setting">
                        <button id="export-data" class="btn btn-secondary">Export Settings</button>
                        <button id="import-data" class="btn btn-secondary">Import Settings</button>
                    </div>
                    <div class="setting">
                        <button id="clear-all-data" class="btn btn-secondary">Clear All Data</button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">Save Settings</button>
                <button id="cancel-settings" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Math Challenge Modal -->
    <div id="math-challenge-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🧮 Math Challenge Required</h2>
                <button id="close-math-modal" class="close-btn">&times;</button>
            </div>

            <div class="modal-body">
                <div class="challenge-section">
                    <h3>Adding sources is discouraged!</h3>
                    <p>To add a new source, you must prove you understand the consequences by solving these simultaneous
                        equations:</p>

                    <div class="equations">
                        <div class="equation">
                            <span id="equation1">2x + 3y = 13</span>
                        </div>
                        <div class="equation">
                            <span id="equation2">x - y = 1</span>
                        </div>
                    </div>

                    <div class="solution-inputs">
                        <div class="input-group">
                            <label for="x-value">x =</label>
                            <input type="number" id="x-value" placeholder="?" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="y-value">y =</label>
                            <input type="number" id="y-value" placeholder="?" step="0.1">
                        </div>
                    </div>

                    <div class="challenge-warning">
                        <p>⚠️ <strong>Warning:</strong> Adding more sources will reduce your time per source and may
                            lead to information overload!</p>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="check-math-answer" class="btn btn-primary">Check Answer</button>
                <button id="cancel-math-challenge" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Source Modal -->
    <div id="add-source-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New News Source</h3>
                <button id="close-add-source-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-source-name">Source Name:</label>
                    <input type="text" id="new-source-name" placeholder="e.g., Reuters News" maxlength="100" required>
                </div>
                <div class="form-group">
                    <label for="new-source-icon">Icon (optional):</label>
                    <input type="text" id="new-source-icon" placeholder="📰" maxlength="10">
                </div>
                <div class="form-group">
                    <label for="new-source-url">URL (optional):</label>
                    <input type="url" id="new-source-url" placeholder="https://example.com" maxlength="500">
                </div>
                <div class="form-group">
                    <label for="new-source-allocation">Time Allocation (minutes):</label>
                    <input type="number" id="new-source-allocation" value="5" min="1" max="60">
                </div>
            </div>
            <div class="modal-footer">
                <button id="add-source-submit" class="btn btn-primary">Add Source</button>
                <button id="cancel-add-source" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script src="script.js"></script>
</body>

</html>