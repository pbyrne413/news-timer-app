<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Reading Timer</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header class="header glass-card">
            <h1 class="text-gradient">üì∞ NewsWise</h1>
            <p>Limit your daily news consumption with intelligent time management</p>
        </header>

        <div class="timer-section glass-card">
            <div class="controls">
                <button id="start-btn" class="btn btn-primary hover-lift">‚ñ∂Ô∏è Start Timer</button>
                <button id="pause-btn" class="btn btn-secondary hover-lift" disabled>‚è∏Ô∏è Pause</button>
                <button id="reset-btn" class="btn btn-secondary hover-lift">üîÑ Reset All</button>
                <button id="settings-btn" class="btn btn-secondary hover-lift">‚öôÔ∏è Settings</button>
            </div>
        </div>


        <div class="stats-section glass-card">
            <h3 class="text-gradient">Today's Usage</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="time-used">0:00</div>
                    <div class="stat-label">Time Used</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="sessions-count">0</div>
                    <div class="stat-label">Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value text-gradient" id="time-remaining">15:00</div>
                    <div class="stat-label">Remaining</div>
                </div>
            </div>
        </div>

        <div class="progress-section glass-card">
            <h3 class="text-gradient">Source Progress</h3>
            <p class="progress-instruction">Click on a source to automatically start its timer:</p>
            <div class="sources-grid">
                <!-- Sources will be loaded dynamically from the database -->
            </div>
        </div>

        <div class="notification-section">
            <p id="notification" class="notification hidden"></p>
        </div>
    </div>

    <!-- Status Footer -->
    <div class="status-footer">
        <div class="status-indicator">
            <span id="connection-status" class="status-offline">üü¢ Online Mode</span>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2 class="text-gradient">‚öôÔ∏è Settings</h2>
                <button id="close-modal" class="close-btn hover-lift">&times;</button>
            </div>

            <div class="modal-body">
                <div class="settings-section">
                    <h3>Daily Settings</h3>
                    <div class="setting">
                        <label for="total-time-limit">Total daily time limit (minutes):</label>
                        <input type="number" id="total-time-limit" class="form-input" value="30" min="1" max="120">
                    </div>
                    <div class="setting">
                        <label for="auto-start">Auto-start timer:</label>
                        <input type="checkbox" id="auto-start">
                    </div>
                    <div class="setting">
                        <button id="distribute-time" class="btn btn-secondary">Distribute Time Evenly</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Individual Source Allocations</h3>
                    <div class="allocation-grid">
                        <!-- Allocation items will be loaded dynamically from the database -->
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Advanced Options</h3>
                    <div class="setting">
                        <button id="add-source-btn" class="btn btn-secondary">Add New Source</button>
                        <p class="setting-description">Adding sources is discouraged. You must solve simultaneous
                            equations to proceed.</p>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Notifications</h3>
                    <div class="setting">
                        <button id="request-notifications" class="btn btn-secondary">üîî Enable Notifications</button>
                        <p class="setting-description">Allow browser notifications for timer alerts.</p>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Data Management</h3>
                    <div class="setting">
                        <button id="export-data" class="btn btn-secondary">üì§ Export Settings</button>
                        <button id="import-data" class="btn btn-secondary">üì• Import Settings</button>
                    </div>
                    <div class="setting">
                        <button id="clear-all-data" class="btn btn-secondary">üóëÔ∏è Clear All Data</button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">Save Settings</button>
                <button id="cancel-settings" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Math Challenge Modal -->
    <div id="math-challenge-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üßÆ Math Challenge Required</h2>
                <button id="close-math-modal" class="close-btn">&times;</button>
            </div>

            <div class="modal-body">
                <div class="challenge-section">
                    <h3>Adding sources is discouraged!</h3>
                    <p>To add a new source, you must prove you understand the consequences by solving these simultaneous
                        equations:</p>

                    <div class="equations">
                        <div class="equation">
                            <span id="equation1">2x + 3y = 13</span>
                        </div>
                        <div class="equation">
                            <span id="equation2">x - y = 1</span>
                        </div>
                    </div>

                    <div class="solution-inputs">
                        <div class="input-group">
                            <label for="x-value">x =</label>
                            <input type="number" id="x-value" placeholder="?" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="y-value">y =</label>
                            <input type="number" id="y-value" placeholder="?" step="0.1">
                        </div>
                    </div>

                    <div class="challenge-warning">
                        <p>‚ö†Ô∏è <strong>Warning:</strong> Adding more sources will reduce your time per source and may
                            lead to information overload!</p>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="check-math-answer" class="btn btn-primary">Check Answer</button>
                <button id="cancel-math-challenge" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Source Modal -->
    <div id="add-source-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New News Source</h3>
                <button id="close-add-source-modal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-source-name">Source Name:</label>
                    <input type="text" id="new-source-name" placeholder="e.g., Reuters News" maxlength="100" required>
                </div>
                <div class="form-group">
                    <label for="new-source-icon">Icon (optional):</label>
                    <input type="text" id="new-source-icon" placeholder="üì∞" maxlength="10">
                </div>
                <div class="form-group">
                    <label for="new-source-url">URL (optional):</label>
                    <input type="url" id="new-source-url" placeholder="https://example.com" maxlength="500">
                </div>
                <div class="form-group">
                    <label for="new-source-allocation">Time Allocation (minutes):</label>
                    <input type="number" id="new-source-allocation" value="5" min="1" max="60">
                </div>
            </div>
            <div class="modal-footer">
                <button id="add-source-submit" class="btn btn-primary">Add Source</button>
                <button id="cancel-add-source" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script src="script.js"></script>
</body>

</html>